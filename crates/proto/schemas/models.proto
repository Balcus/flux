syntax = "proto3";

package models;

service AuthServiec {
  rpc IssueToken(IssueTokenRequest) returns (IssueTokenResponse) {}
}

service PushService {
  rpc Push(stream Chunk) returns (UploadStatus) {}
}

service CloneService {
  rpc CloneRepository(CloneRequest) returns (stream Chunk) {}
}

enum UploadStatusCode {
  UNKNOWN = 0;
  OK = 1;
  FAILED = 2;
}

message Chunk {
  string repo_name = 1;
  bytes content = 2;
}

message UploadStatus {
  string response_message = 1;
  UploadStatusCode code = 2;
}

message CloneRequest {
  string name = 1;
}

message IssueTokenRequest {
  string user_name = 1;
  string user_email = 2;
}

message IssueTokenResponse {
  string access_token = 1;
}